# Yue - UI/UX 设计指南

## 🎯 设计原则

### 1. 用户中心设计
- **个人使用优先**：专注于单用户深度体验
- **简洁直观**：减少认知负荷，提升使用效率
- **一致性**：保持界面元素和行为的一致性

### 2. 技术实现原则
- **响应式设计**：支持桌面、平板、移动多端
- **性能优化**：确保界面流畅，响应迅速
- **可访问性**：支持键盘导航和屏幕阅读器

## 🎨 视觉设计系统

### 1. 颜色系统
```css
/* 主色调 */
--primary: #10B981;      /* 翡翠绿 - 主品牌色 */
--primary-hover: #059669;
--primary-active: #047857;

/* 辅助色 */
--secondary: #3B82F6;    /* 蓝色 - 辅助操作 */
--accent: #8B5CF6;      /* 紫色 - 强调功能 */

/* 中性色 */
--surface: #FFFFFF;      /* 表面色 */
--background: #F9FAFB;   /* 背景色 */
--border: #E5E7EB;      /* 边框色 */
--text-primary: #111827; /* 主要文字 */
--text-secondary: #6B7280; /* 次要文字 */

/* 暗色主题 */
[data-theme="dark"] {
  --surface: #1F2937;
  --background: #111827;
  --border: #374151;
  --text-primary: #F9FAFB;
  --text-secondary: #D1D5DB;
}
```

### 2. 字体系统
- **主要字体**：Inter 或系统默认字体栈
- **代码字体**：JetBrains Mono 或 Monaco
- **字号系统**：12px, 14px, 16px, 18px, 20px, 24px, 30px
- **字重系统**：400 (正常), 500 (中等), 600 (半粗), 700 (粗体)

### 3. 间距系统
- **基础单位**：4px
- **间距尺度**：4px, 8px, 12px, 16px, 20px, 24px, 32px, 40px, 48px
- **容器间距**：16px, 20px, 24px

## 📐 布局结构

### 1. 三栏式智能布局详细规范

#### 位置和尺寸（精确数值）
```
+---------------------------------------------------------------+
| 侧边栏 (250px固定) |        主聊天区 (自适应)         | 知识面板 (300px固定) |
| 左侧固定          | 中间弹性布局                    | 右侧固定             |
+---------------------------------------------------------------+
|                一体化输入框 (100%宽度, 72px最小高度)         |
+---------------------------------------------------------------+
```

**具体尺寸规范：**
- **侧边栏**：宽度250px，左侧固定定位，包含对话历史和工具快捷方式
- **主聊天区**：自适应宽度，最小宽度400px，最大宽度无限制
- **知识面板**：宽度300px，右侧固定定位，默认折叠状态（可展开）
- **输入框**：全宽度，最小高度72px，最大高度200px（可调整）

#### 形状和视觉层次

**容器形状：**
- **圆角系统**：外层容器无圆角，内部卡片使用6px圆角
- **阴影层次**：
  - 侧边栏：`--shadow-sm` (轻微底部阴影)
  - 消息气泡：`--shadow-sm` 
  - 输入框：`--shadow-md` (聚焦状态提升阴影)
- **分割线**：1px实线 `var(--border)`，用于区域分隔

**视觉层次：**
```
Z轴层次 (从低到高):
1. 背景层 (z-index: 0)
2. 侧边栏/主区域 (z-index: 10)  
3. 消息气泡 (z-index: 20)
4. 输入框 (z-index: 30)
5. 弹出层/菜单 (z-index: 1000+)
```

### 2. 颜色功能详细设计

#### 功能区域颜色编码
```css
/* 侧边栏 - 导航功能区 */
--sidebar-bg: var(--surface);
--sidebar-border: var(--border);
--sidebar-item-hover: #F3F4F6;
--sidebar-item-active: var(--primary-lightest);

/* 主聊天区 - 内容展示区 */  
--chat-bg: var(--background);
--message-user-bg: var(--primary-lightest);
--message-ai-bg: var(--surface);
--message-border: var(--border);

/* 知识面板 - 辅助信息区 */
--knowledge-bg: var(--surface);
--knowledge-highlight: #FFFBEB; /* 琥珀色高亮 */
--knowledge-border: var(--border);

/* 输入框 - 交互操作区 */
--input-bg: var(--surface);
--input-border: var(--border);
--input-focus-border: var(--primary);
```

#### 状态颜色指示
- **成功状态**：绿色 `#10B981` (操作完成、消息已发送)
- **警告状态**：琥珀色 `#F59E0B` (加载中、处理中)
- **错误状态**：红色 `#EF4444` (错误提示、操作失败)
- **信息状态**：蓝色 `#3B82F6` (系统消息、提示信息)

### 3. 详细功能区域设计

#### 侧边栏 (250px) - 导航控制中心
```
侧边栏结构：
┌───────────────────────────────────┐
│ 搜索框 (44px高度)                  │
├───────────────────────────────────┤
│ 对话历史列表 (自适应高度)           │
│  • 按时间分组 (今天、昨天、更早)    │
│  • 标签颜色分类                     │
│  • 收藏星标重要对话                │
├───────────────────────────────────┤  
│ 工具快捷方式 (固定底部)             │
│  • 新建对话 [+]                    │
│  • 设置 ⚙️                        │
│  • 笔记 📝                        │
└───────────────────────────────────┘
```

**交互细节：**
- 悬停效果：背景色 `var(--sidebar-item-hover)`
- 选中状态：左侧3px竖条 + 背景色 `var(--sidebar-item-active)`
- 拖拽排序：对话项目可手动排序
- 右键菜单：对话管理操作（重命名、删除、导出）

#### 主聊天区 - 对话内容核心
```
消息流布局：
┌───────────────────────────────────┐
│ 用户消息 (右侧对齐)                 │
│  • 背景色: var(--message-user-bg)   │
│  • 圆角: 12px 12px 0 12px          │
│  • 最大宽度: 80%                   │
├───────────────────────────────────┤
│ AI消息 (左侧对齐)                   │
│  • 背景色: var(--message-ai-bg)     │
│  • 圆角: 12px 12px 12px 0          │
│  • 最大宽度: 80%                   │
├───────────────────────────────────┤
│ 系统消息 (居中)                     │
│  • 背景色: transparent             │
│  • 文字色: var(--text-secondary)    │
│  • 字体样式: italic                │
└───────────────────────────────────┘
```

**消息功能：**
- **引用回复**：点击消息时间戳可引用回复
- **操作菜单**：悬停显示复制、分享、保存操作
- **代码块**：语法高亮 + 复制按钮 + 运行按钮(可选)
- **思维链**：可折叠/展开的推理过程展示

#### 知识面板 (300px) - 智能上下文辅助
```
面板标签页：
┌───────────────────────────────────┐
│ [相关笔记] [知识图谱] [搜索建议]     │
├───────────────────────────────────┤
│ 上下文相关笔记列表                 │
│ • 自动匹配当前对话主题的笔记        │
│ • 点击插入到输入框                 │
│ • 拖拽到聊天区直接发送             │
├───────────────────────────────────┤
│ 实体知识图谱                      │
│ • 人物、地点、概念的关系可视化      │
│ • 点击节点查看详情                │
├───────────────────────────────────┤
│ 智能搜索建议                      │
│ • 基于对话历史的搜索建议           │
│ • 快速知识检索                    │
└───────────────────────────────────┘
```

#### 输入框 - 多功能交互中心
```
输入框结构：
┌───────────────────────────────────┐
│ 多模式输入区域 (自适应高度)         │
│ • 文本输入 + @提及助手选择          │
│ • 文件拖拽上传区域                 │
│ • 语音输入按钮                    │
├───────────────────────────────────┤
│ 快捷操作工具栏 (固定高度44px)       │
│ • 发送按钮 →                      │
│ • 附件 📎                         │
│ • 表情 😊                         │
│ • 格式工具 **B** *I* `Code`       │
└───────────────────────────────────┘
```

**智能输入特性：**
- **高度自适应**：根据内容自动调整高度（3-10行）
- **@提及智能提示**：输入@显示助手列表，包含头像和描述
- **斜杠命令**：/help, /search, /note 等快捷命令
- **语法高亮**：Markdown和代码的实时预览

### 4. 响应式断点设计

**桌面端 (>1024px)：**
- 完整三栏布局
- 知识面板默认展开
- 侧边栏固定显示

**平板端 (768px-1024px)：**
- 侧边栏可折叠（汉堡菜单）
- 知识面板可折叠（图标按钮）
- 主聊天区占据主要空间

**移动端 (<768px)：**
- 单栏布局，底部标签导航
- 侧边栏和知识面板通过模态框访问
- 输入框固定在底部（类似微信布局）

### 5. 业界参考实现分析

#### 📱 参考产品：Trae Settings / Notion AI / Slack Clarity

**Trae Settings 的优秀特性（设置与管理界面参考）：**
- **垂直侧边栏导航**：
  - **用户信息区**：顶部展示用户头像与状态。
  - **集成搜索框**：带有快捷键提示（如 `⌘F`），提升操作效率。
  - **分组分类**：清晰的功能分组，配合一致的图标系统。
  - **清晰激活态**：通过柔和背景色和文字加粗明确当前位置。
- **卡片式配置项设计**：
  - **信息层级**：标题（加粗）+ 描述（浅色小字）+ 操作控件（右对齐）。
  - **视觉容器**：将相关配置项包裹在带边框的容器中，形成清晰的视觉区块。
  - **标准化控件**：统一的下拉选择框和按钮样式，保持交互一致性。

**Notion AI 的优秀特性：**
- **侧边栏设计**：左侧文档树 + 右侧AI面板，宽度比例 30% - 70%
- **上下文感知**：根据内容类型动态调整AI建议面板
- **无缝集成**：AI功能深度融入编辑体验，非弹窗式

**Slack Clarity 的交互设计：**
- **频道侧边栏**：固定250px，包含搜索、频道列表、快捷操作
- **消息线程**：右侧展开式面板，不打断主对话流
- **输入框智能**：根据@提及动态显示建议列表

**Microsoft Copilot 的布局：**
- **三栏结构**：工具栏(200px) + 聊天区 + 文档视图(280px)
- **视觉区分**：通过背景色微妙区分功能区域
- **响应式处理**：移动端自动折叠辅助面板

### 6. 动效和过渡设计

**微交互动效：**
- **面板切换**：250ms `ease-out` 滑入动效
- **消息发送**：轻微缩放动画 (scale: 0.95 → 1)
- **加载状态**：骨架屏动画 + 进度指示器
- **焦点转移**：柔和的焦点过渡动画

## 🌟 核心效仿设计要素 (Core Design Elements to Imitate)

基于对业界优秀产品（Trae, Notion, Slack）的分析，本项目应重点效仿并落实以下设计模式：

### 1. 极简主义与深度专注 (Minimalism & Deep Focus)
- **效仿点**：使用极淡的边框和背景色（如 `var(--background)` 与 `var(--surface)` 的微弱对比）来区分区域，而非强烈的线条。
- **目的**：减少视觉噪音，让用户专注于 AI 对话和笔记内容。
- **落实**：在侧边栏和主内容区之间使用 1px 的 `#E5E7EB` 分割线。

### 2. 增强型输入体验 (Enhanced Input Experience)
- **效仿点**：输入框不仅仅是文字区域，而是一个“命令中心”。效仿 Trae 的搜索框设计，加入显性的快捷键提示（如 `⌘F`, `⌘K`）。
- **目的**：通过视觉引导（Visual Cues）提升高级用户的使用效率。
- **落实**：在搜索框和 AI 输入框的右侧显示浅灰色的快捷键字符。

### 3. 结构化的配置项 (Structured Configuration)
- **效仿点**：效仿 Trae Settings 的卡片式布局。采用“标题 + 辅助描述 + 右置控件”的三段式结构。
- **目的**：降低配置界面的理解门槛，使复杂的 AI 参数设置变得易于操作。
- **落实**：所有设置项必须包含至少一行的 `text-secondary` 描述文字。

### 4. 复杂管理界面与对话框设计 (Complex Management & Dialog Design)
- **效仿点**：参考 Trae 的“模型管理”界面和“添加模型”对话框。
- **列表/表格设计**：
    - **分组展示**：使用可展开/折叠的区块（Premium, Advanced, Custom）组织长列表。
    - **列信息规范**：包含图标、名称、类型、供应商及操作按钮的清晰表格。
- **工具/插件列表设计 (效仿 MCP 管理器)**：
    - **状态指示器**：名称旁使用绿色打勾标记表示已正确连接。
    - **交互开关**：右侧放置 Toggle Switch 用于快速启用/禁用插件。
    - **可扩展行**：点击左侧箭头展开，展示插件的详细工具列表或日志。
    - **下拉式添加按钮**：使用带有 `+ Add` 标识的下拉按钮，区分不同的添加模式（Marketplace vs Manual）。
- **对话框 (Modal) 规范**：
    - **视觉重心**：居中显示的半透明遮罩，背景内容虚化。
    - **表单布局**：垂直堆叠的表单项，带红色星号的必填项标记。
    - **交互引导**：醒目的全宽主操作按钮，带关闭按钮 (X) 的标题栏。
- **Agent 编辑器设计 (效仿 Trae Agent Creation)**：
    - **顶部动作条**：在标题旁放置“Smart Generate”按钮，使用渐变色或特殊图标强调 AI 能力。
    - **多媒体输入**：左侧展示 Agent 头像，支持点击更换，右侧为名称输入框。
    - **结构化表单组**：
        - **Prompt 区域**：使用大面积文本域，支持 Markdown 预览及字数统计。
        - **工具勾选列表**：按类别（MCP Tools vs Built-in Tools）划分区块，每项包含图标、名称及简短描述，支持复选框一键开启。
    - **协作开关设计**：使用带有状态标签（如 "SOLO Only"）的 Toggle 开关，并配合问号图标提供详细文档说明。
- **落实**：
    - 使用 `var(--surface)` 作为对话框背景，配合 `var(--shadow-xl)`。
    - 列表项悬停高亮，保持交互反馈。

### 5. 上下文感知的侧边栏 (Contextual Sidebars)
- **效仿点**：效仿 Notion 的双侧边栏设计，但根据当前任务动态切换右侧“知识面板”的内容。
- **目的**：实现“对话即检索”，让 AI 自动关联相关笔记。
- **落实**：当对话涉及特定知识点时，右侧面板自动高亮显示关联的笔记卡片。

### 5. 高品质的微交互 (High-Quality Micro-interactions)
- **效仿点**：效仿 Slack 的即时反馈。按钮点击、面板切换应有轻微的物理感（弹性动效）。
- **目的**：提升软件的“高级感”和操作的确定性。
- **落实**：使用 `cubic-bezier(0.4, 0, 0.2, 1)` 作为全局标准的缓动函数。

## 🖱️ 交互设计

### 1. 输入体验
#### 智能输入框
- **@提及功能**：快速选择agent/工具
- **快捷指令**：/help, /search, /note 等命令
- **多模态支持**：文本、语音、图片混合输入
- **上下文提示**：基于对话历史的智能补全

#### 消息交互
- **操作菜单**：回复、引用、复制、分享、保存为笔记
- **思维过程**：可折叠/展开的推理链展示
- **代码交互**：运行代码片段、解释代码、优化建议
- **引用追踪**：点击引用可跳转到源消息或笔记

### 2. 导航系统
#### 全局导航
- **面包屑导航**：清晰的页面层级指示
- **快捷键支持**：
  - Cmd/Ctrl+K：全局搜索
  - Cmd/Ctrl+N：新建对话
  - Cmd/Ctrl+E：切换编辑模式
- **状态指示**：网络状态、保存状态、处理状态

#### 侧边栏导航
- **对话历史**：搜索、过滤、标签分类
- **工作空间**：项目/主题文件夹管理
- **工具快捷**：常用工具和agent快捷方式

### 3. 动效设计
#### 微交互
- **按钮反馈**：悬停、点击状态变化
- **加载状态**：平滑的加载动画
- **成功反馈**：操作成功的视觉确认

#### 页面过渡
- **面板展开**：平滑的面板展开/收起
- **页面切换**：流畅的页面过渡效果
- **焦点管理**：清晰的焦点状态指示

## 🎯 功能区域设计

### 1. 主聊天区
#### 消息流设计
- **消息气泡**：用户和AI消息区分明确
- **时间戳**：相对时间显示，精确到分钟
- **状态指示**：发送中、已发送、已读状态
- **错误处理**：消息发送失败的优雅降级

#### 输入区域
- **自适应高度**：根据内容自动调整高度
- **功能按钮**：发送、附件、语音输入
- **模型选择**：快速切换AI模型和设置

### 2. 侧边栏设计
#### 对话列表
- **智能排序**：按时间、活跃度、重要性排序
- **搜索过滤**：关键词搜索和标签过滤
- **批量操作**：多选、归档、删除操作

#### 快速入口
- **新建对话**：快速开始新对话
- **模板选择**：预设对话模板
- **工具访问**：常用工具快捷方式

### 3. 知识面板
#### 上下文相关
- **相关笔记**：显示当前对话相关的笔记
- **知识推荐**：基于内容推荐相关知识
- **快速操作**：一键创建笔记、保存片段

#### 知识管理
- **笔记预览**：简洁的笔记预览界面
- **编辑功能**：快速编辑和格式化
- **关联显示**：显示笔记与对话的关联

## ♿ 无障碍设计

### 1. 键盘导航
- **完整支持**：所有功能可通过键盘操作
- **焦点管理**：清晰的焦点状态和顺序
- **快捷操作**：键盘快捷键支持

### 2. 屏幕阅读器
- **语义结构**：正确的HTML语义标签
- **ARIA属性**：完善的ARIA标签和属性
- **状态通知**：动态内容的实时通知

### 3. 视觉辅助
- **颜色对比**：WCAG AA标准的对比度
- **字体缩放**：支持文字大小调整
- **减少动效**：可选的减少动画设置

## 🎨 主题系统

### 1. 亮色主题
- **清新明亮**：适合日间使用
- **高对比度**：确保内容清晰可读
- **专业感**：保持界面专业简洁

### 2. 暗色主题
- **护眼舒适**：减少夜间眼睛疲劳
- **深度模式**：深色背景增强专注度
- **一致性**：保持与亮色主题的功能一致性

### 3. 主题切换
- **系统同步**：跟随系统主题自动切换
- **手动选择**：用户手动选择主题偏好
- **即时生效**：切换无需刷新页面

## 📱 响应式设计

### 1. 移动端优化
#### 布局调整
- **单栏布局**：垂直堆叠所有内容区域
- **底部导航**：底部固定导航栏
- **手势支持**：滑动、长按等手势操作

#### 交互优化
- **触摸友好**：足够大的点击目标
- **简化操作**：移动端专属的简化界面
- **离线支持**：基本的离线功能支持

### 2. 平板端优化
#### 混合布局
- **可折叠面板**：侧边栏可展开/收起
- **分屏支持**：支持多任务分屏显示
- **手势导航**：边缘滑动手势导航

## 🔧 开发实施指南

### 1. 组件开发原则
- **原子设计**：原子→分子→组织→模板→页面
- **可复用性**：组件高度可复用和可组合
- **Props设计**：清晰的Props接口设计

### 2. 状态管理
- **本地状态**：组件内部状态管理
- **全局状态**：跨组件状态共享
- **持久化**：用户偏好的本地存储

### 3. 性能优化
- **懒加载**：按需加载组件和资源
- **虚拟化**：长列表的虚拟滚动
- **缓存策略**：合理的缓存策略设计

## 🚀 实施优先级

### 🟢 高优先级（立即实施）
1. 响应式布局基础框架
2. 暗色主题实现
3. 输入体验优化
4. 消息交互增强

### 🟡 中优先级（后续迭代）
1. 三栏布局重构
2. 设计系统建立
3. 动效系统实现
4. 无障碍支持

### 🔴 低优先级（长期规划）
1. 高级个性化定制
2. 多工作空间支持
3. 离线完整功能

---
*最后更新：2026-01-31*
*版本：1.0.0*